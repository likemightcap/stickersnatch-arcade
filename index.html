<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Sticker Snatch</title>

  <link rel="icon" type="image/png" href="assets/icons/icon-192.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Loading Screen -->
  <div class="loadingOverlay" id="loadingOverlay">
    <div class="loadingContent">
      <img src="assets/sprites/player-goat.png" alt="Loading" class="loadingSpinner" />
      <div class="loadingText pixelText">LOADING...</div>
      <div class="loadingBar">
        <div class="loadingBarFill" id="loadingBarFill"></div>
      </div>
    </div>
  </div>

  <main class="app">
    <div class="gameShell" id="gameShell">
      <canvas id="gameCanvas" width="360" height="640" aria-label="Sticker Snatch game"></canvas>

      <!-- ARCADE: Game Intro Sequence Elements -->
      <div id="gameIntroContainer" style="display: none;">
        <div id="introBeam"></div>
        <div id="introStickersContainer"></div>
      </div>
      <!-- END ARCADE INTRO -->

      <!-- Persistent banner (locked to bottom, always visible) -->
      <div class="bannerBar" aria-hidden="true">
        <img id="bannerImg" alt="" />
      </div>

      <!-- Persistent logo (animates from title to menu) -->
      <img src="assets/sprites/stickersnatch-title.png" alt="Sticker Snatch" class="gameLogo" id="gameLogo" />

      <!-- New High Score notification -->
      <div class="highScoreBanner" id="highScoreBanner">
        <div class="highScoreText pixelText">NEW HIGH</div>
        <div class="highScoreText pixelText">SCORE!</div>
      </div>

      <!-- Title Screen overlay -->
      <div class="overlay show" id="titleOverlay">
        <div class="overlayCard pixelCard titleCard">
          <button class="btn pixelBtn pixelText" id="startGameBtn">START GAME</button>
        </div>
      </div>

      <!-- Menu overlay (4 buttons) -->
      <div class="overlay" id="menuOverlay">
        <div class="overlayCard pixelCard">
          <button class="btn pixelBtn pixelText" id="playNowBtn">PLAY NOW</button>
          <button class="btn pixelBtn pixelText" id="howToPlayBtn">HOW TO PLAY</button>
          <button class="btn pixelBtn pixelText" id="settingsBtn" style="display: none;">SETTINGS</button>
          <button class="btn pixelBtn pixelText" id="leaderboardBtn">LEADERBOARD</button>
        </div>
      </div>

      <!-- Game Mode Selection overlay -->
      <div class="overlay" id="gameModeOverlay">
        <div class="overlayCard pixelCard gameModeCard">
          <button class="btn pixelBtn pixelText gameModeMainBtn" id="mainGameBtn">ARCADE MODE</button>
          <button class="btn pixelBtn pixelText" id="gameModeBackBtn" style="margin-top: 16px;">BACK</button>
        </div>
      </div>

      <!-- Settings overlay -->
      <div class="overlay" id="settingsOverlay">
        <div class="overlayCard pixelCard settingsCard">
          <div class="title pixelText">SETTINGS</div>
          
          <!-- Music slider -->
          <div class="settingRow">
            <label class="settingLabel pixelText">MUSIC</label>
            <input type="range" class="settingSlider" id="musicSlider" min="0" max="100" value="50" />
            <span class="settingValue pixelText" id="musicValue">50</span>
          </div>

          <!-- SFX slider -->
          <div class="settingRow">
            <label class="settingLabel pixelText">SFX</label>
            <input type="range" class="settingSlider" id="sfxSlider" min="0" max="100" value="100" />
            <span class="settingValue pixelText" id="sfxValue">100</span>
          </div>

          <!-- Haptics toggle -->
          <div class="settingRow">
            <label class="settingLabel pixelText">HAPTICS</label>
            <button class="toggleBtn pixelBtn pixelText" id="hapticsToggle">ON</button>
          </div>

          <!-- Theme Color button -->
          <div class="settingRow">
            <label class="settingLabel pixelText">THEME COLOR</label>
            <button class="btn pixelBtn pixelText" id="themeColorBtn" style="font-size: 8px; padding: 8px 12px;">CHANGE</button>
          </div>

          <button class="btn pixelBtn pixelText" id="settingsBackBtn" style="margin-top: 16px;">BACK</button>
        </div>
      </div>

      <!-- Theme Color Picker overlay -->
      <div class="overlay" id="themeColorOverlay">
        <div class="overlayCard pixelCard">
          <div class="title pixelText">THEME COLOR</div>
          <div class="subtitle pixelText" style="margin-bottom: 20px; font-size: 7px;">Choose your favorite color!</div>
          
          <!-- Default STICKER GOAT theme button (wider, prominent) -->
          <button class="colorChoiceBtn pixelBtn" data-color="#E0FF00" style="background: #E0FF00; height: 70px; width: 100%; margin-bottom: 16px; position: relative; border: 3px solid #E0FF00; box-shadow: 0 4px 0 #a8c90a;">
            <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 10px; color: #000; text-shadow: none; font-weight: bold;">STICKER GOAT (DEFAULT)</span>
          </button>
          
          <div id="colorGrid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px;">
            <!-- Top Row -->
            <button class="colorChoiceBtn pixelBtn" data-color="#00E5FF" style="background: #00E5FF; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #000; text-shadow: none;">ELECTRIC CYAN</span>
            </button>
            <button class="colorChoiceBtn pixelBtn" data-color="#0066FF" style="background: #0066FF; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #fff;">BLUE ORBIT</span>
            </button>
            <button class="colorChoiceBtn pixelBtn" data-color="#00FFC6" style="background: #00FFC6; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #000; text-shadow: none;">MINT CONDITION</span>
            </button>
            <button class="colorChoiceBtn pixelBtn" data-color="#39FF14" style="background: #39FF14; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #000; text-shadow: none;">ALIEN GREEN</span>
            </button>
            <!-- Bottom Row -->
            <button class="colorChoiceBtn pixelBtn" data-color="#FF2CFD" style="background: #FF2CFD; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #fff;">NEBULA PINK</span>
            </button>
            <button class="colorChoiceBtn pixelBtn" data-color="#8F00FF" style="background: #8F00FF; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #fff;">PURPLE HAZE</span>
            </button>
            <button class="colorChoiceBtn pixelBtn" data-color="#FF003C" style="background: #FF003C; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #fff;">RED ALERT</span>
            </button>
            <button class="colorChoiceBtn pixelBtn" data-color="#ff9200" style="background: #ff9200; height: 60px; position: relative; border: none;">
              <span style="position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #fff;">SOLAR ORANGE</span>
            </button>
          </div>
          
          <button class="btn pixelBtn pixelText" id="themeColorBackBtn">BACK</button>
        </div>
      </div>

      <!-- Pause overlay -->
      <div class="overlay" id="pauseOverlay">
        <div class="overlayCard pixelCard pauseCard" id="pauseMainCard">
          <div class="title pixelText">PAUSED</div>
          <button class="btn pixelBtn pixelText" id="pauseContinueBtn">CONTINUE GAME</button>
          <button class="btn pixelBtn pixelText" id="pauseLeaderboardBtn">LEADERBOARD</button>
          <button class="btn pixelBtn pixelText" id="pauseMainMenuBtn">RETURN TO MAIN MENU</button>
          <div style="height: 8px;"></div>
          <button class="btn pixelBtn pixelText" id="pauseCloseBtn">CLOSE</button>
        </div>

        <!-- Confirmation prompt (initially hidden) -->
        <div class="overlayCard pixelCard confirmCard" id="pauseConfirmCard" style="display: none;">
          <div class="title pixelText">ARE YOU SURE?</div>
          <div class="subtitle pixelText">END YOUR CURRENT GAME?</div>
          <div style="display: flex; gap: 12px; margin-top: 16px;">
            <button class="btn pixelBtn pixelText" id="pauseConfirmYes" style="flex: 1;">YES</button>
            <button class="btn pixelBtn pixelText" id="pauseConfirmNo" style="flex: 1;">NO</button>
          </div>
        </div>
      </div>

      <!-- Konami Code Button Popup -->
      <div class="overlay" id="konamiOverlay" style="display: none;">
        <div class="overlayCard pixelCard konamiCard">
          <div class="title pixelText">ENTER CODE</div>
          <div class="konamiButtonRow">
            <button class="btn pixelBtn pixelText konamiBtn" id="konamiBBtn">B</button>
            <button class="btn pixelBtn pixelText konamiBtn" id="konamiABtn">A</button>
            <button class="btn pixelBtn pixelText konamiBtn" id="konamiStartBtn">START</button>
          </div>
        </div>
      </div>

      <!-- Start overlay -->
      <div class="overlay" id="startOverlay">
        <div class="overlayCard pixelCard">
          <div class="subtitle pixelText">Press Here to Start</div>
          <div class="hint pixelText">Tap left/right sides to move.</div>
          <div class="hint pixelText">Survive for 60 seconds and snatch stickers</div>
        </div>
      </div>

      <!-- Countdown overlay -->
      <div class="overlay" id="countdownOverlay">
        <div class="overlayCard pixelCard countdownCard">
          <div class="countdownText pixelText" id="countdownText">3</div>
        </div>
      </div>

      <!-- Boss Intro Overlay -->
      <div class="overlay" id="bossIntroOverlay">
        <div class="bossIntroCard">
          <div class="bossIntroName pixelText">BREN</div>
          <div class="bossIntroSubtitle pixelText">THE STICKER BOSS</div>
        </div>
      </div>


      <!-- Win overlay -->
      <div class="overlay" id="winOverlay">
        <div class="overlayCard pixelCard">
          <div class="title pixelText">CONGRATULATIONS!</div>
          <div class="subtitle pixelText">YOU WIN!</div>
          <div class="codeLabel pixelText">Enter your name:</div>
          <div class="nameInputRow">
            <input type="text" class="nameInput pixelText" id="nameInput" maxlength="20" placeholder="Your Name" />
            <button class="btn pixelBtn pixelText okBtn" id="submitNameBtn">OK</button>
          </div>
          <div class="statusMessage pixelText" id="statusMessage"></div>
          <button class="btn pixelBtn pixelText" id="winPlayAgainBtn">PLAY AGAIN</button>
        </div>
      </div>

      <!-- Game Over overlay -->
      <div class="overlay" id="gameOverOverlay">
        <div class="overlayCard pixelCard">
          <div class="title pixelText">GAME OVER</div>
          <div class="subtitle pixelText">You ran out of lives.</div>
          <div class="codeLabel pixelText">Enter your name:</div>
          <div class="nameInputRow">
            <input type="text" class="nameInput pixelText" id="gameOverNameInput" maxlength="20" placeholder="Your Name" />
            <button class="btn pixelBtn pixelText okBtn" id="gameOverSubmitNameBtn">OK</button>
          </div>
          <div class="statusMessage pixelText" id="gameOverStatusMessage"></div>
          <button class="btn pixelBtn pixelText" id="gameOverPlayAgainBtn">PLAY AGAIN</button>
        </div>
      </div>

      <!-- Out of Time overlay -->
<div class="overlay" id="outOfTimeOverlay">
  <div class="overlayCard pixelCard">
    <div class="title pixelText">OUT OF TIME</div>
  </div>
</div>

      <!-- ARCADE NAME ENTRY OVERLAY -->
      <div class="overlay" id="arcadeNameEntryOverlay">
        <div class="arcadeNameEntryCard">
          <div class="arcadeEntryTitle pixelText" id="arcadeEntryTitle">GAME OVER</div>
          <div class="arcadeNameDisplay pixelText" id="arcadeNameDisplay">_____</div>
          <div class="arcadeAlphabetGrid" id="arcadeAlphabetGrid">
            <!-- Grid will be generated by JavaScript -->
          </div>
          <div class="arcadeEntryControls">
            <button class="arcadeControlBtn pixelText" id="arcadeBackspaceBtn">←BACK</button>
            <button class="arcadeControlBtn pixelText" id="arcadeEnterBtn">ENTER</button>
            <button class="arcadeControlBtn pixelText" id="arcadeCancelBtn">CANCEL</button>
          </div>
        </div>
      </div>

      <!-- Secret Level Win overlay -->
      <div class="overlay" id="secretWinOverlay">
        <div class="overlayCard pixelCard">
          <div class="title pixelText">CONGRATULATIONS!</div>
          <div class="subtitle pixelText">YOU FOUND AND BEAT THE SECRET LEVEL!</div>
          <button class="btn pixelBtn pixelText" id="secretWinReturnBtn">RETURN TO MENU</button>
        </div>
      </div>

      <!-- Secret Level Game Over overlay -->
      <div class="overlay" id="secretGameOverOverlay">
        <div class="overlayCard pixelCard">
          <div class="title pixelText">GAME OVER</div>
          <button class="btn pixelBtn pixelText" id="secretGameOverTryAgainBtn">TRY AGAIN</button>
          <button class="btn pixelBtn pixelText" id="secretGameOverReturnBtn">RETURN TO MENU</button>
        </div>
      </div>

      <!-- How to Play overlay -->
      <div class="overlay" id="howToPlayOverlay">
        <div class="overlayCard pixelCard">
          
          <!-- Main Game How to Play -->
          <div id="mainHowToPlayContent">
            <div class="subtitle pixelText" style="text-align: center;">OBJECTIVE</div>
            <div class="hint pixelText" style="text-align: center;">SNATCH STICKERS, AVOID ASTEROIDS</div>
            <div class="hint pixelText" style="text-align: center;">SURVIVE EACH LEVEL</div>
            <div class="hint pixelText" style="text-align: center;">BEAT THE FINAL BOSS</div>
            
            <div class="subtitle pixelText" style="margin-top: 10px; text-align: center;">LIVES & STICKERS</div>
            <div class="hint pixelText" style="text-align: center;">HIT ASTEROID = LOSE 1 LIFE</div>
            <div class="hint pixelText" style="text-align: center;">SNATCH 25 STICKERS = +1 LIFE</div>
            
            <div class="subtitle pixelText" style="margin-top: 10px; text-align: center;">POINTS</div>
            <div class="pointsGrid">
              <div class="pointsColumn">
                <img src="assets/sprites/sticker.png" alt="Sticker" class="pointsImage stickerImage">
                <div class="hint pixelText">25pts</div>
              </div>
              <div class="pointsColumn">
                <img src="assets/sprites/thick-stick.png" alt="Thick Sticker" class="pointsImage thickStickerImage">
                <div class="hint pixelText">100pts</div>
              </div>
            </div>
            
            <div class="subtitle pixelText" style="margin-top: 10px; text-align: center;">POWERUPS</div>
            <div class="pointsGrid">
              <div class="pointsColumn">
                <img src="assets/powerups/magnet.png" alt="Magnetism" class="pointsImage">
                <div class="hint pixelText" style="font-size: 10px;">MAGNETISM</div>
                <div class="hint pixelText" style="font-size: 8px; opacity: 0.8;">2x points</div>
              </div>
              <div class="pointsColumn">
                <img src="assets/powerups/turnt.png" alt="Turnt Mode" class="pointsImage drunkPowerup">
                <div class="hint pixelText" style="font-size: 10px;">TURNT</div>
                <div class="hint pixelText" style="font-size: 8px; opacity: 0.8;">3x points</div>
              </div>
            </div>
            <div class="pointsGrid" style="margin-top: 8px;">
              <div class="pointsColumn">
                <img src="assets/powerups/shield.png" alt="Shield" class="pointsImage">
                <div class="hint pixelText" style="font-size: 10px;">SHIELD</div>
                <div class="hint pixelText" style="font-size: 8px; opacity: 0.8;">Block hit</div>
              </div>
              <div class="pointsColumn">
                <img src="assets/powerups/time.png" alt="Time Warp" class="pointsImage">
                <div class="hint pixelText" style="font-size: 10px;">TIME WARP</div>
                <div class="hint pixelText" style="font-size: 8px; opacity: 0.8;">Slow down</div>
              </div>
            </div>
          </div>

          <button class="btn pixelBtn pixelText" id="howToPlayBackBtn" style="margin-top: 16px;">BACK</button>
        </div>
      </div>

      <!-- Leaderboard overlay -->
      <div class="overlay" id="leaderboardOverlay">
        <div class="overlayCard pixelCard leaderboardCard">
          <div class="title pixelText">LEADERBOARD</div>
          
          <!-- Arcade Mode Leaderboard -->
          <div id="mainLeaderboardContent">
            <div class="leaderboardList" id="leaderboardList">
              <!-- Leaderboard entries will be inserted here -->
            </div>
          </div>
          
          <button class="btn pixelBtn pixelText" id="leaderboardBackBtn">BACK</button>
        </div>
      </div>

      <!-- Arcade Control Test Overlay (hidden, accessed via T key) -->
      <div class="overlay" id="controlTestOverlay" style="display: none;">
        <div class="overlayCard pixelCard" style="max-width: 500px;">
          <div class="title pixelText">CONTROL TEST</div>
          <div style="margin: 20px 0; text-align: center;">
            <div class="subtitle pixelText" style="margin-bottom: 12px;">JOYSTICK</div>
            <div class="hint pixelText" id="joystickTest">Press any direction...</div>
            
            <div class="subtitle pixelText" style="margin-top: 20px; margin-bottom: 12px;">BUTTONS</div>
            <div class="hint pixelText" id="button1Test">Button 1 (Enter): Not pressed</div>
            <div class="hint pixelText" id="button2Test">Button 2 (Space): Not pressed</div>
            
            <div class="subtitle pixelText" style="margin-top: 20px; margin-bottom: 12px;">COIN ACCEPTOR</div>
            <div class="hint pixelText" id="coinTest">Waiting for coin (5 key)...</div>
          </div>
          <div class="hint pixelText" style="text-align: center; margin-top: 20px; font-size: 8px;">Press T to close</div>
        </div>
      </div>

      <!-- ARCADE CREDIT DISPLAY (Top Center) -->
      <div id="arcadeCreditDisplay" class="arcadeCreditDisplay">
        <div id="insertCoinMessage" class="insertCoinMessage">INSERT COIN</div>
        <div id="creditCounter" class="creditCounter" style="display: none;">CREDITS: <span id="creditCount">0</span></div>
      </div>

      <!-- INTRO SKIP INDICATOR -->
      <div id="introSkipIndicator" class="introSkipIndicator" style="display: none;">
        START = SKIP
      </div>

      <!-- HUD -->
      <div class="hud">
        <div class="hudRow">
          <!-- Lives (icon + number) -->
          <div class="hudBox">
            <img id="hudLifeIcon" class="hudIcon" alt="" />
            <span class="hudValue pixelText" id="livesText">10</span>
          </div>

          <!-- Points -->
          <div class="hudBox" id="hudPointsBox">
            <span class="hudValue pixelText" id="pointsText">0</span>
          </div>

          <!-- Stickers (icon + x/10) -->
          <div class="hudBox">
            <img id="hudStickerIcon" class="hudIcon" alt="" />
            <span class="hudValue pixelText" id="stickersText">0/10</span>
          </div>
        </div>
      </div>

      <!-- Mobile-only pause instruction (shown at game start) -->
      <div class="pauseInstruction pixelText" id="pauseInstruction">
        ↑TAP HERE TO PAUSE GAME↑
      </div>

      <!-- Gesture Tutorial (shown on first play only, mobile only) -->
      <div class="gestureTutorial" id="gestureTutorial" style="display: none;">
        <div class="tapZoneBox leftZone" id="leftZone">
          <div class="tapText pixelText">TAP/HOLD<br>TO MOVE LEFT</div>
        </div>
        <div class="tapZoneBox rightZone" id="rightZone">
          <div class="tapText pixelText">TAP/HOLD<br>TO MOVE RIGHT</div>
        </div>
      </div>

      <!-- Helps mobile prevent double-tap zoom without intercepting pointer events -->
      <div class="touchShield"></div>
      
      <!-- Attract Mode Video Player (inside gameShell so it shares stacking context) -->
      <div id="attractModeContainer" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; background: #000;">
        <video id="attractModeVideo" autoplay playsinline style="width: 100%; height: 100%; object-fit: cover;">
          Your browser does not support video playback.
        </video>
      </div>
    </div>
  </main>
  
  <script src="script.js"></script>

</body>
</html>
